<p-table
  [value]="data"
  styleClass="p-datatable-gridlines"
  [tableStyle]="{ 'min-width': '50rem' }"
>
  <ng-template pTemplate="header">
    <!-- First row -->
    <tr>
      <th>
        <!-- <p-checkbox [binary]="true" inputId="binary"></p-checkbox> -->
      </th>
      <!-- Ko the (for let i = 0; i < getNumCols(); i++) -->
      <!-- Su dung index as ... khi quan trong index trong array -->
      <th *ngFor="let col of data[0]; index as colIndex">
        <div class="flex gap-1 align-items-center">
          <p-button
            (click)="addColumnPrevious(colIndex)"
            icon="pi pi-chevron-left"
            styleClass="p-button-sm"
          ></p-button>
          <span>
            {{ colIndex + 1 }}
          </span>
          <p-button
            icon="pi pi-chevron-right"
            (click)="addColumnAfter(colIndex)"
            styleClass="p-button-sm"
          ></p-button>
          <p-button
            (click)="deleteColumn(colIndex)"
            *ngIf="data[0].length > 1"
            icon="pi pi-times"
            styleClass="p-button-sm p-button-danger"
          >
          </p-button>
        </div>
      </th>
      <!-- <button (click)="addColumnAfter(data[0].length)">+</button> -->
    </tr>
  </ng-template>
  <!-- let-item: belongs to primeNg -->
  <!-- for each item -->
  <!-- let-i="rowIndex": rowIndex of each row -->
  <ng-template let-item let-rowIndex="rowIndex" pTemplate="body">
    <tr>
      <td>
        <div class="flex gap-1 align-items-center">
          <p-button
            icon="pi pi-chevron-up"
            styleClass="p-button-sm"
            (click)="addRowAbove(rowIndex)"
          ></p-button>
          <span>
            {{ rowIndex + 1 }}
          </span>
          <p-button
            icon="pi pi-chevron-down"
            styleClass="p-button-sm"
            (click)="addRowBelow(rowIndex)"
          ></p-button>
          <p-button
            (click)="deleteRow(rowIndex)"
            *ngIf="data.length > 1"
            icon="pi pi-times"
            styleClass="p-button-sm p-button-danger"
          >
          </p-button>
        </div>
      </td>
      <ng-container *ngFor="let cell of item; index as colIndex">
        <td pEditableColumn>
          <p-cellEditor>
            <ng-template pTemplate="input">
              <input
                pInputText
                type="text"
                [(ngModel)]="item[colIndex].str"
                class="w-full"
              />
            </ng-template>
            <ng-template pTemplate="output">
              {{ item[colIndex].str }}
            </ng-template>
          </p-cellEditor>
        </td>
      </ng-container>
    </tr>
  </ng-template>
</p-table>

<div class="generate-button">
  <p-button label="Generate" (click)="generateMarkdownTable()"></p-button>
  <textarea
    [(ngModel)]="markdownTable"
    readonly
    style="height: 100px; width: 100px"
    class="markdown-table"
  ></textarea>
</div>
